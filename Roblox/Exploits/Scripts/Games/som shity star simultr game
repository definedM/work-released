-- game link: https://www.roblox.com/games/8781849572/shityfackingstargame
local LP = game.Players.LocalPlayer
local function brekthing(item, tool)
	game:GetService("ReplicatedStorage").Attack.UpdateHPEvent:FireServer(item, tool)
end
local function GetResources(PlayerName) --lol u can do this to other players' islands but do that urself smh
	local treeTab, oresTab = {}, {}
	local Star = workspace["Star_"..PlayerName].Player
	
	for i, v in pairs(Star.Land:GetChildren()) do
		local Trees = v:FindFirstChild("Tree")
		if Trees then
			Trees = Trees:FindFirstChildOfClass("Folder")
			task.wait()
			for i, tree in pairs(Trees:GetChildren()) do
				if tree:IsA("Model") then
					treeTab[#treeTab+1] = tree
				end
			end	
		end
		
		local Ore = v:FindFirstChild("Ore")
		if Ore then
			Ore = Ore:FindFirstChildOfClass("Folder")
			task.wait()
			for i, ore in pairs(Ore:GetChildren()) do
				if ore:IsA("Model") then 
					oresTab[#oresTab+1] = ore
				end
			end	
		end
	end
	return treeTab, oresTab
end

local Trees, Ores = GetResources(LP.Name)

for _, tree in pairs(Trees) do
	coroutine.wrap(function()
		local HP = tree.HP
		for i = 1, HP.Value do
			brekthing(tree, "Axe")
			task.wait()
		end
		HP.Changed:Connect(function(hp)
			brekthing(tree, "Axe")
		end)
	end)()
end

for _, ore in pairs(Ores) do
	coroutine.wrap(function()
		local HP = ore.HP
		for i = 1, HP.Value do
			brekthing(ore, "Pickaxe")
			task.wait()
		end
		HP.Changed:Connect(function()
			brekthing(ore, "Pickaxe")
		end)
	end)()
end
